# Kurtuba

> Kurtuba - это облачное ключ-значение хранилище данных с REST API интерфейсом, в качестве базы данных используется NoSQL база MongoDB.

Избавьтесь от всех сложных конфигураций, сценариев установки и обслуживания для хранения ваших данных!

## Возможности
 - **Создание токена:** Он необходим для доступа к конкретному хранилищу и представляет из себя обычный UUID идентификатор.
 - **Добавление данных в хранилище**
 - **Получение данных по ключу из хранилища**
 - **Удаление данных из хранилища**
 
#### Демо
[View demo](https://kurtuba.ru)

> *Важно! Данный сервер предназначен только для демонстрации, не используйте его в реальном приложении!*

## Getting Started

Требование:
 - Node: v9.3.0+ 
 - MongoDB: v3.6.2+

Сначала клонируйте этот репозиторий:

    git@github.com:hazratgs/kurtuba.git
Перейдите в каталог:

    cd kurtuba/

Установите все зависимости:

    npm install
    
Затем запустите MongoDB:
###### Инструкцию по установке на вашу систему вы сможете найти на [официальном сайте MongoDB](https://docs.mongodb.com/manual/tutorial/#installation)
Mac OS

    mongod
    
Ubuntu

    sudo service mongod start

После чего вы можете запустить Kurtuba на вашей рабочей машине командой:

    node index.js

Для фоновой работы хранилища, вам необходимо установить npm пакет [pm2](https://www.npmjs.com/package/pm2), подробнее о нем вы сможете прочитать в соответствующем репозитории, если он у вас установлен, то выполните команду:

    npm run start

Вот и все!

## API

#### Создание токена:
Как мы говорили выше, токен это ключ к доступу к конкретному хранилищу, а так же своего рода namespace.
Получить новые токен можно с помощью запроса:

    axios.post('https://kurtuba.ru/create')
      .then(result => console.log('Новый токен: ', result.data.data))
      .catch(e => console.log('Ошибка при создании нового токена'))


#### Добавление данных в хранилище:
После получения токена, мы можем записать, что-нибудь в наше хранилище, сделать это можно отправив POST запрос по адресу `/set`:

    axios.post('https://kurtuba.ru/{наш токен}/set', {
      counter: 1
    })
      .then(result => console.log('Успешно добавлено'))
      .cath(e => console.log('Ошибка добавления'))

#### Обновление данных
Обновить данные в хранилище можно соответствующим HTTP методом `UPDATE` и передачей данных:

    axios.update('https://kurtuba.ru/{наш токен}/update', {
      counter: 2
    })
      .then(result => console.log('Успешно обновлено'))
      .cath(e => console.log('Ошибка обновления'))

#### Удаление данных
В REST API архитектуре принято использовать HTTP метод DELETE, именно с помощью его можно удалить определенное свойство из хранилища, например удалить `counter`:

    axios.delete('https://kurtuba.ru/{наш токен}/remove/counter')
      .then(result => console.log('Успешно удалено'))
      .cath(e => console.log('Ошибка удаления'))

#### Получение данных
Отправляется GET запрос с нужным ключём, значение которого нам нужно получить:

    axios.get('https://kurtuba.ru/{наш токен}/get/counter')
      .then(result => console.log('Наш счетчик: ', result.data.data))
      .cath(e => console.log('Ошибка получения данных'))

Если вам нужно получить все данные, которые есть в хранилище, то необходимо выполнить вот такой запрос:

    axios.get('https://kurtuba.ru/{наш токен}/get/__ALL__')
      .then(result => console.log('Наш счетчик: ', result.data.data))
      .cath(e => console.log('Ошибка получения данных'))
      
Обратите внимание на `__ALL__`, мы сообщаем хранилищу, что нам нужны все данные и в результате получим массив с данными хранилища.
